let State={None:0,Ingredients:1,Instructions:2,Notes:3},extract_markdown=g=>{let h=new DOMParser,i=h.parseFromString(g,'text/html'),b=State.None,e=null,f=[],c=[],d=[];for(let g of i.querySelectorAll("li,p,h1,h2,h3,h4,h5,h6")){let a=g.textContent.trim();if(a.length==0)continue;let h=a.toLowerCase();switch(h){case"ingredients":b=State.Ingredients,e=null;continue;case"instructions":b=State.Instructions,e=null;continue;case"notes":b=State.Notes,e=null;continue;default:break}switch(g.nodeName){case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"H7":case"H8":case"H9":a=`\n### ${a}`;break;default:a=`  - ${a}`;break}switch(b){case State.Ingredients:f.push(a);break;case State.Instructions:c.push(a);break;case State.Notes:d.push(a);break;default:break}}let a="";return f.length>0&&(a+="## Ingredients\n\n",a+=f.join("\n")),c.length>0&&(a+="\n\n## Instructions\n\n",a+=c.join("\n")),d.length>0&&(a+="\n\n## Notes\n\n",a+=d.join("\n")),a};(function(){const e=document.querySelector(".input"),a=document.querySelector(".input input"),c=document.querySelector(".input button"),f=document.querySelector(".output"),d=document.querySelector(".output textarea"),b=()=>{let b=encodeURI(a.value);fetch(`https://corsproxy.io/?url=${b}`).then(a=>{a.text().then(a=>{let b=extract_markdown(a);d.value=b})})};c.addEventListener("click",()=>{b()}),a.addEventListener("keyup",a=>{a.key=="Enter"&&b()})})()